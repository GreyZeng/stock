# 历史行情数据-腾讯

接口: stock_zh_a_hist_tx

目标地址: <https://gu.qq.com/sh000919/zs>

描述: 腾讯证券-日频-股票历史数据; 历史数据按日频率更新, 当日收盘价请在收盘后获取

限量: 单次返回指定沪深京 A 股上市公司、指定周期和指定日期间的历史行情日频率数据

输入参数

| 名称         | 类型    | 描述                                         |
|------------|-------|--------------------------------------------|
| symbol     | str   | symbol='sz000001'; 带市场标识                   |
| start_date | str   | start_date='19000101'; 开始查询的日期             |
| end_date   | str   | end_date='20500101'; 结束查询的日期               |
| adjust     | str   | 默认返回不复权的数据; qfq: 返回前复权后的数据; hfq: 返回后复权后的数据 |
| timeout    | float | timeout=None; 默认不设置超时参数                    |

**股票数据复权**

1.为何要复权：由于股票存在配股、分拆、合并和发放股息等事件，会导致股价出现较大的缺口。
若使用不复权的价格处理数据、计算各种指标，将会导致它们失去连续性，且使用不复权价格计算收益也会出现错误。
为了保证数据连贯性，常通过前复权和后复权对价格序列进行调整。

2.前复权：保持当前价格不变，将历史价格进行增减，从而使股价连续。
前复权用来看盘非常方便，能一眼看出股价的历史走势，叠加各种技术指标也比较顺畅，是各种行情软件默认的复权方式。
这种方法虽然很常见，但也有两个缺陷需要注意。

2.1 为了保证当前价格不变，每次股票除权除息，均需要重新调整历史价格，因此其历史价格是时变的。
这会导致在不同时点看到的历史前复权价可能出现差异。

2.2 对于有持续分红的公司来说，前复权价可能出现负值。

3.后复权：保证历史价格不变，在每次股票权益事件发生后，调整当前的股票价格。
后复权价格和真实股票价格可能差别较大，不适合用来看盘。
其优点在于，可以被看作投资者的长期财富增长曲线，反映投资者的真实收益率情况。

4.在量化投资研究中普遍采用后复权数据。

输出参数-历史行情数据

| 名称     | 类型      | 描述      |
|--------|---------|---------|
| date   | object  | 交易日     |
| open   | float64 | 开盘价     |
| close  | float64 | 收盘价     |
| high   | float64 | 最高价     |
| low    | float64 | 最低价     |
| amount | int64   | 注意单位: 手 |

接口示例-不复权

```python
import akshare as ak

stock_zh_a_hist_tx_df = ak.stock_zh_a_hist_tx(symbol="sz000001", start_date="20200101", end_date="20231027", adjust="")
print(stock_zh_a_hist_tx_df)
```

数据示例-不复权

```text
     date   open  close   high    low      amount
0    2020-01-02  16.65  16.87  16.95  16.55  1530231.87
1    2020-01-03  16.94  17.18  17.31  16.92  1116194.81
2    2020-01-06  17.01  17.07  17.34  16.91   862083.50
3    2020-01-07  17.13  17.15  17.28  16.95   728607.56
4    2020-01-08  17.00  16.66  17.05  16.63   847824.12
..          ...    ...    ...    ...    ...         ...
920  2023-10-23  10.59  10.50  10.60  10.43   530404.00
921  2023-10-24  10.54  10.55  10.61  10.44   760653.00
922  2023-10-25  10.51  10.38  10.54  10.36  1411450.00
923  2023-10-26  10.31  10.41  10.42  10.30   599991.00
924  2023-10-27  10.38  10.45  10.48  10.33   919771.00
[925 rows x 6 columns]
```

接口示例-前复权

```python
import akshare as ak

stock_zh_a_hist_tx_df = ak.stock_zh_a_hist_tx(symbol="sz000001", start_date="20200101", end_date="20231027", adjust="qfq")
print(stock_zh_a_hist_tx_df)
```

数据示例-前复权

```text
     date   open  close   high    low      amount
0    2020-01-02  15.74  15.96  16.04  15.64  1530231.87
1    2020-01-03  16.03  16.27  16.40  16.01  1116194.81
2    2020-01-06  16.10  16.16  16.43  16.00   862083.50
3    2020-01-07  16.22  16.24  16.37  16.04   728607.56
4    2020-01-08  16.09  15.75  16.14  15.72   847824.12
..          ...    ...    ...    ...    ...         ...
920  2023-10-23  10.59  10.50  10.60  10.43   530404.00
921  2023-10-24  10.54  10.55  10.61  10.44   760653.00
922  2023-10-25  10.51  10.38  10.54  10.36  1411450.00
923  2023-10-26  10.31  10.41  10.42  10.30   599991.00
924  2023-10-27  10.38  10.45  10.48  10.33   919771.00
[925 rows x 6 columns]
```

接口示例-后复权

```python
import akshare as ak

stock_zh_a_hist_tx_df = ak.stock_zh_a_hist_tx(symbol="sz000001", start_date="20200101", end_date="20231027", adjust="hfq")
print(stock_zh_a_hist_tx_df)
```

数据示例-后复权

```text
     date     open    close     high      low      amount
0    2020-01-02  1880.18  1904.07  1912.76  1869.33  1530231.87
1    2020-01-03  1911.67  1937.73  1951.85  1909.50  1116194.81
2    2020-01-06  1919.27  1925.79  1955.11  1908.42   862083.50
3    2020-01-07  1932.30  1934.48  1948.59  1912.76   728607.56
4    2020-01-08  1918.19  1881.27  1923.62  1878.01   847824.12
..          ...      ...      ...      ...      ...         ...
920  2023-10-23  1321.10  1311.33  1322.19  1303.73   530404.00
921  2023-10-24  1315.67  1316.76  1323.27  1304.81   760653.00
922  2023-10-25  1312.41  1298.30  1315.67  1296.13  1411450.00
923  2023-10-26  1290.70  1301.56  1302.64  1289.61   599991.00
924  2023-10-27  1298.30  1305.90  1309.16  1292.87   919771.00
[925 rows x 6 columns]
```
